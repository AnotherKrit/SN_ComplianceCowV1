<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_transform_script">
    <sys_transform_script action="INSERT_OR_UPDATE">
        <active>true</active>
        <map display_value="ComplianceCow Evidence File Transform">2bc09e1dc32492105f909e1d0501314c</map>
        <order>100</order>
        <script><![CDATA[(function runTransformScript(source, map, log, target /*undefined onStart*/ ) {

	// Add your code here
	var attachment = new GlideSysAttachment();

	//set up inputs
	
	var contentType = "text/plain";
	if (source.fileformat == "CSV" || source.fileformat == "csv" )
		contentType = "text/csv";
	else if (source.fileformat == "JSON" || source.fileformat == "json" )
		contentType = "application/json";
	var fileName = target.evidencename + "." + source.fileformat.toLowerCase();
	var agr = attachment.writeBase64(target, fileName, contentType, source.filecontent);
	var gr = new GlideRecord('sys_attachment');
	gr_attachment_exists = gr.get(agr);
	if (gr_attachment_exists)
	{
		target.setValue('assessmentdata', agr);
		target.update();
	}
	

})(source, map, log, target);]]></script>
        <sys_class_name>sys_transform_script</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2024-09-09 06:38:03</sys_created_on>
        <sys_id>d938221dc3ac92105f909e1d0501319d</sys_id>
        <sys_mod_count>7</sys_mod_count>
        <sys_name>onAfter</sys_name>
        <sys_package display_value="ComplianceCowV1" source="x_1507800_complian">7b1269b4c3d4d6d05f909e1d0501315c</sys_package>
        <sys_policy/>
        <sys_scope display_value="ComplianceCowV1">7b1269b4c3d4d6d05f909e1d0501315c</sys_scope>
        <sys_update_name>sys_transform_script_d938221dc3ac92105f909e1d0501319d</sys_update_name>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2024-09-09 20:05:25</sys_updated_on>
        <when>onAfter</when>
    </sys_transform_script>
    <sys_es_latest_script action="INSERT_OR_UPDATE">
        <id>d938221dc3ac92105f909e1d0501319d</id>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2024-09-09 06:38:03</sys_created_on>
        <sys_id>6858e25dc3ac92105f909e1d050131e7</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2024-09-09 06:38:03</sys_updated_on>
        <table>sys_transform_script</table>
        <use_es_latest>true</use_es_latest>
    </sys_es_latest_script>
</record_update>
